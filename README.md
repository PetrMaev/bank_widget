# Проект виджета банка
## Описание:
**Данный виджет предполагает вывод нескольких последних успешных банковских операций клиента в личном кабинете банка.**
## Цель проекта:
Реализовать виджет, который на бэкенде будет готовить данные для отображения в новом виджете.
## Установка:
1. Клонируйте репозиторий:
```
git@github.com:PetrMaev/bank_widget.git
```
2. Установите зависимости:
```
poetry install
```
## Тестирование функций
Для проверки выполнения тестов функций введите команду:
```python
pytest
```
Для просмотра покрытия кода тестами введите команду:
```python
pytest --cov
```
Или откройте файл index.html в браузере
## Использование:
В проекте реализованы несколько функций, а именно:
1. Функция, которая обрабатывает информацию о картах и маскирует номер карты или счета. Пример работы функции: 
```python
# Пример для карты
Visa Platinum 7000792289606361  # входной аргумент
Visa Platinum 7000 79** **** 6361  # выход функции

# Пример для счета
Счет 73654108430135874305  # входной аргумент
Счет **4305  # выход функции
```
2. Функция, которая по запросу выдает транзакции, где валюта операции соответствует заданной (например, USD). Пример работы функции:
```python
usd_transactions = filter_by_currency(transactions, "USD")
for _ in range(2):
    print(next(usd_transactions))

>>> {
          "id": 939719570,
          "state": "EXECUTED",
          "date": "2018-06-30T02:08:58.425572",
          "operationAmount": {
              "amount": "9824.07",
              "currency": {
                  "name": "USD",
                  "code": "USD"
              }
          },
          "description": "Перевод организации",
          "from": "Счет 75106830613657916952",
          "to": "Счет 11776614605963066702"
      }
      {
              "id": 142264268,
              "state": "EXECUTED",
              "date": "2019-04-04T23:20:05.206878",
              "operationAmount": {
                  "amount": "79114.93",
                  "currency": {
                      "name": "USD",
                      "code": "USD"
                  }
              },
              "description": "Перевод со счета на счет",
              "from": "Счет 19708645243227258542",
              "to": "Счет 75651667383060284188"
       }
```
3. Функция, которая возвращает описание каждой операции по очереди. Пример работы функции:
```python
descriptions = transaction_descriptions(transactions)
for _ in range(5):
    print(next(descriptions))

>>> Перевод организации
    Перевод со счета на счет
    Перевод со счета на счет
    Перевод с карты на карту
    Перевод организации
```
4. Функция-генератор, которая генерирует банковских карт в формате XXXX XXXX XXXX XXXX, где X — цифра номера карты. Генератор может сгенерировать номера карт в заданном диапазоне от 0000 0000 0000 0001 до 9999 9999 9999 9999. Пример работы функции:
```python
for card_number in card_number_generator(1, 5):
    print(card_number)

>>> 0000 0000 0000 0001
    0000 0000 0000 0002
    0000 0000 0000 0003
    0000 0000 0000 0004
    0000 0000 0000 0005
```
5. Добавлен декоратор функций, который логирует результат работы функции или возникшие ошибки. Пример работы декоратора для простой функции:
```python
@log(filename="mylog.txt")
def my_function(x, y):
    return x + y

my_function(1, 2)
```
Ожидаемый вывод в лог-файл mylog.txt при успешном выполнении:
```python
my_function ok
```
*Если имя файла не задано, логи выводятся в консоль.*

Ожидаемый вывод при ошибке:
```python
my_function error: тип ошибки. Inputs: (1, 2), {}
```
Где *тип ошибки* заменяется на текст ошибки.
## Документация:
*Здесь должна быть документация, но пока здесь будет лежать [ссылка на образец лучшего файла README.md](https://github.com/silent-lad/VueSolitaire) по версии автора [вот этой статьи](https://nuancesprog.ru/p/7105/)*
## Лицензия:
Этот проект лицензирован по [лицензии MIT](LICENSE). *Но это не точно*
